<!DOCTYPE html>
<html class="js" lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- <base href="../"> -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Fav Icon  -->
    <link rel="shortcut icon" th:href="@{/images/OP_ico.png}">
    <!-- Page Title  -->
    <title>Добавлення товару</title>
    <!-- StyleSheets  -->
    <link rel="stylesheet" th:href="@{/css/dashlite.css}">
    <link id="skin-default" rel="stylesheet" th:href="@{/css/theme.css}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/j7qa848foatnucsr63lz000n2e0yxzhelq772wnn61gpyclv/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
</head>

<body class="nk-body bg-lighter npc-general has-sidebar ">
<div class="nk-app-root">
    <!-- main @s -->
    <div class="nk-main ">
        <!-- sidebar @s -->
        <div th:replace="~{admin/fragments/fragAdminHeader.html}"></div>
        <!-- sidebar @e -->

        <!-- wrap @s -->
        <div class="nk-wrap ">
            <!-- main header @s -->
            <div class="nk-header nk-header-fixed is-light">
                <div class="container-fluid">
                    <div class="nk-header-wrap">
                        <div class="nk-menu-trigger d-xl-none ml-n1">
                            <a href="#" class="nk-nav-toggle nk-quick-nav-icon" data-target="sidebarMenu"><em class="icon ni ni-menu"></em></a>
                        </div>
                        <div class="nk-header-brand d-xl-none">
                            <a href="/admin/products" class="logo-link">
                                <img class="logo-light logo-img" th:src="@{/images/logo-light.png}" th:srcset="@{/images/logo-light.png}" alt="logo">
                                <img class="logo-dark logo-img" th:src="@{/images/logo-dark.png}" th:srcset="@{/images/logo-dark.png}" alt="logo-dark">
                            </a>
                        </div><!-- .nk-header-brand -->

                        <div class="nk-header-tools">
                            <ul class="nk-quick-nav">
                                <li class="dropdown user-dropdown">
                                    <div class="user-toggle">
                                        <div class="user-avatar sm">
                                            <em class="icon ni ni-user-alt"></em>
                                        </div>
                                        <div class="user-info d-none d-md-block">
                                            <h6>Адміністратор</h6>
                                        </div>
                                    </div>
                                </li><!-- .dropdown -->
                                <li>
                                    <a href="/logout" class="nk-quick-nav-icon" data-toggle="tooltip" data-placement="bottom" title="Вийти">
                                        <em class="icon ni ni-signout"></em>
                                    </a>
                                </li>
                            </ul><!-- .nk-quick-nav -->
                        </div><!-- .nk-header-tools -->
                    </div><!-- .nk-header-wrap -->
                </div><!-- .container-fliud -->
            </div>
            <!-- main header @e -->
            <!-- content @s -->
            <div class="nk-content ">
                <div class="container-fluid">
                    <div class="nk-content-inner">
                        <div class="nk-content-body">
                            <div class="components-preview wide-md mx-auto">
                                <div class="nk-block-head nk-block-head-lg wide-sm">
                                    <div class="nk-block-head-content">
                                        <div class="nk-block-head-sub"><a class="back-to" href="/admin/products"><em class="icon ni ni-arrow-left"></em><span>Назад</span></a></div>
                                        <h3 class="nk-block-title fw-normal">Добавлення товару</h3>
                                    </div>
                                </div><!-- .nk-block-head -->
                                <div class="nk-block nk-block-lg">
                                    <div class="card card-bordered card-preview">
                                        <div class="card-inner">
                                            <div class="preview-block">
                                                <span class="preview-title-lg overline-title">Загальна інформація</span>
                                                <div class="row gy-4">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productImage">Зображення</label>
                                                            <div class="form-control-wrap">
                                                                <div class="custom-file">
                                                                    <input type="file" multiple class="custom-file-input" id="productImage" name="multipartFile" onchange="validateimg(this)">
                                                                    <label class="custom-file-label" for="productImage"></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="form-label">Виробник</label>
                                                            <div class="form-control-wrap">
                                                                <select class="form-select form-control form-control-lg" name="producer.id">
                                                                    <option th:each="pr :${producers}" th:value="${pr.getId()}" th:text="${pr.getName()}"></option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="form-label">Категорія</label>
                                                            <div class="form-control-wrap">
                                                                <select class="form-select form-control form-control-lg" multiple="multiple" id="mainCategories" name="category">
                                                                    <option th:each="ct :${categories}" th:value="${ct.getId()}" th:text="${ct.getName()}"></option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="form-label">Підкатегорія</label>
                                                            <div class="form-control-wrap">
                                                                <select class="form-select form-control form-control-lg" multiple="multiple" id="subCategories" name="categoryItem">
                                                                    <option th:each="it :${items}" th:value="${it.getId()}" th:text="${it.getName()}"></option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productName">Назва продукту</label>
                                                            <div class="form-control-wrap">
                                                                <input type="text" class="form-control" id="productName" placeholder="Назва..." name="name">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productDescription">Опис</label>
                                                            <div class="form-control-wrap">
                                                                <textarea class="form-control" id="productDescription" placeholder="Введіть текст..." name="shortDescription"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr class="preview-hr">
                                                <span class="preview-title-lg overline-title">Вкладки</span>
                                                <div class="row gy-4">
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productDetailedDescription">Детальний опис</label>
                                                            <div class="form-control-wrap">
                                                                <textarea class="form-control rich-editor" id="productDetailedDescription" placeholder="Введіть текст..." name="details"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productProportionsDescription">Рекомендована добова норма</label>
                                                            <div class="form-control-wrap">
                                                                <textarea class="form-control rich-editor" id="productProportionsDescription" placeholder="Введіть текст..." name="dailyNorm"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group">
                                                            <label class="form-label" for="productProducerDescription">Виробник</label>
                                                            <div class="form-control-wrap">
                                                                <textarea class="form-control rich-editor" id="productProducerDescription" placeholder="Введіть текст..." name="producerDetails"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr class="preview-hr">
                                                <span class="preview-title-lg overline-title">Пакування і ціна</span>
                                                <div class="row gy-4 align-center">
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="form-label">Тип пакування</label>
                                                            <div class="form-control-wrap">
                                                                <select class="form-select form-control form-control-lg" id="packageType" name="category">
                                                                    <option th:value="шт." th:text="штуки"></option>
                                                                    <option th:value="кг" th:text="кілограми"></option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="form-label" for="packSize">Одиниць</label>
                                                            <div class="form-control-wrap">
                                                                <input type="number" min="1" value="1" step="1" class="form-control" id="packSize" placeholder="Одиниць..." name="packSize">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="form-label" for="inStock">К-сть на складі</label>
                                                            <div class="form-control-wrap">
                                                                <input type="number" min="1" value="1" step="1" class="form-control" id="inStock" placeholder="Кількість..." name="inStock">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <div class="form-control-wrap">
                                                                <div class="form-text-hint" style="top: 50%;">
                                                                    <span class="overline-title">UAH</span>
                                                                </div>
                                                                <label class="form-label" for="productPrice">Ціна</label>
                                                                <input type="text" pattern="[0-9]*\.?[0-9]*" class="form-control" id="productPrice" placeholder="Не заповнено..." name="price" value="0.00">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <div class="form-control-wrap">
                                                                <div class="form-text-hint" style="top: 50%;">
                                                                    <span class="overline-title">UAH</span>
                                                                </div>
                                                                <label class="form-label" for="productPromotionalPrice">Акційна ціна</label>
                                                                <input type="text" pattern="[0-9]*\.?[0-9]*" class="form-control" id="productPromotionalPrice" placeholder="Не заповнено..." name="newPrice" value="0.00">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <div class="preview-block">
                                                                <div class="custom-control custom-switch">
                                                                    <input type="checkbox" class="custom-control-input" id="promotedProduct" name="onSale">
                                                                    <label class="custom-control-label" for="promotedProduct">Акційний товар</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button title="Добавити позицію" id="addPosition" class="btn btn-icon btn-lg btn-primary float-right" style="margin-left: auto; margin-right: 0.75rem;">
                                                        <em class="icon ni ni-grid-add-c"></em>
                                                    </button>
                                                </div>
                                            <!-- Table -->
                                                <hr class="preview-hr">
                                                <table class="nk-tb-list nk-tb-ulist table-stripped" id="positionsTable" style="margin-top: 2rem;" data-auto-responsive="false">
                                                    <thead>
                                                    <tr class="nk-tb-item nk-tb-head">
                                                        <th class="nk-tb-col tb-col-lg">Тип пакування</th>
                                                        <td class="nk-tb-col">Кількість</td>
                                                        <td class="nk-tb-col tb-col-lg">К-сть на складі</td>
                                                        <td class="nk-tb-col">Ціна</td>
                                                        <td class="nk-tb-col tb-col-lg">Акційний товар</td>
                                                        <td class="nk-tb-col tb-col-lg">Акційна ціна</td>
                                                        <th class="nk-tb-col"><span class="sub-text" style="text-align: right; padding-right: 2rem;">Дії</span></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="nk-tb-item">
                                                        <td class="nk-tb-col tb-col-lg">
                                                            <span>1</span>
                                                        </td>
                                                        <td class="nk-tb-col">
                                                            <span>2</span>
                                                        </td>
                                                        <td class="nk-tb-col tb-col-lg">
                                                            <span>3</span>
                                                        </td>
                                                        <td class="nk-tb-col">
                                                            <span>4</span>
                                                        </td>
                                                        <td class="nk-tb-col tb-col-lg">
                                                            <span>5</span>
                                                        </td>
                                                        <td class="nk-tb-col tb-col-lg">
                                                            <span>6</span>
                                                        </td>
                                                        <td class="nk-tb-col nk-tb-col-tools">
                                                            <ul class="nk-tb-actions gx-1">
                                                                <li>
                                                                    <div class="drodown">
                                                                        <a href="#" class="dropdown-toggle btn btn-icon btn-trigger" data-toggle="dropdown"><em class="icon ni ni-more-h"></em></a>
                                                                        <div class="dropdown-menu dropdown-menu-right">
                                                                            <ul class="link-list-opt no-bdr">
                                                                                <li><a data-toggle="modal" onclick="showEditProducerModal(this)"><em class="icon ni ni-edit-alt"></em><span>Редагувати</span></a></li>
                                                                                <li><a data-toggle="modal" onclick="showConfirmationDeleteProducerModal(this)" ><em class="icon ni ni-trash"></em><span>Видалити</span></a></li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr><!-- .nk-tb-item  -->
                                                    </tbody>
                                                </table>
                                            <!-- Table -->
                                                <div class="form-group" style="margin-top: 1rem;">
                                                    <button type="button" class="btn btn-outline-primary">Добавити</button>
                                                    <a href="/admin/products" type="button" class="btn btn-outline-danger">Скасувати</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!-- .card-preview -->
                                </div><!-- .nk-block -->
                            </div><!-- .components-preview -->
                        </div>
                    </div>
                </div>
            </div>


            <!-- Edit start -->
            <div class="modal fade" tabindex="-1" role="dialog" id="editProductModal" aria-modal="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <a href="#" class="close" data-dismiss="modal"><em class="icon ni ni-cross-sm"></em></a>
                        <div class="modal-body modal-body-md">
                            <h4 class="title">Редагування</h4>
                            <br>
                            <form action="/admin/editProduct" method="post" enctype="multipart/form-data">
                                <input type="text" id="selectedForEditItem" hidden="" name="id">
                                <div class="row form-group mb-md-0">
                                    <div class="col-md-6 form-group">
                                        <!-- <div class="form-group"> -->
                                        <label class="form-label" for="editProductImage">Зображення</label>
                                        <div class="form-control-wrap">
                                            <div class="custom-file">
                                                <input type="file" multiple class="custom-file-input" id="editProductImage" name="multipartFile" onchange="validateimg(this)">
                                                <label class="custom-file-label" for="editProductImage"></label>
                                            </div>
                                        </div>
                                        <!-- </div> -->
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <!-- <div class="form-group"> -->
                                        <label class="form-label" for="editArticleNumber">Артикул</label>
                                        <div class="form-control-wrap">
                                            <input type="text" class="form-control" id="editArticleNumber" name="article" placeholder="Артикул...">
                                        </div>
                                        <!-- </div> -->
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="editProductName">Назва продукту</label>
                                    <div class="form-control-wrap">
                                        <input type="text" class="form-control" id="editProductName" placeholder="Назва..." name="name">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label" for="editProductDescription">Опис</label>
                                    <div class="form-control-wrap">
                                        <textarea class="form-control" id="editProductDescription" placeholder="Введіть текст..." name="description"></textarea>
                                    </div>
                                </div>

                                <div class="row form-group mb-md-0">
                                    <div class="col-md-6 form-group">
                                        <div class="form-control-wrap">
                                            <div class="form-text-hint" style="top: 50%;">
                                                <span class="overline-title">UAH</span>
                                            </div>
                                            <label class="form-label" for="editProductPrice">Ціна</label>
                                            <input type="text" class="form-control" id="editProductPrice" name="price" placeholder="Не заповнено...">
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <div class="form-control-wrap">
                                            <div class="form-text-hint" style="top: 50%;">
                                                <span class="overline-title">UAH</span>
                                            </div>
                                            <label class="form-label" for="productPromotionalPriceEdit">Акційна ціна</label>
                                            <input type="text" pattern="[0-9]*\.?[0-9]*" class="form-control" id="productPromotionalPriceEdit" placeholder="Не заповнено..." name="newPrice" value="0.00">
                                        </div>
                                    </div>
                                </div>

                                <div class="row form-group">
                                    <div class="col-md-12 form-group">
                                        <div class="form-group">
                                            <div class="preview-block">
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input" checked id="promotedProductEdit" name="productForSales">
                                                    <label class="custom-control-label" for="promotedProductEdit">Акційний товар</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row form-group">
                                    <div class="col-md-12 form-group">
                                        <label class="form-label">Категорія</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select form-control form-control-lg" id="mainCategoriesEdit" name="category">
                                                <option value="CLOTHES">Одяг</option>
                                                <option value="SHOES">Взуття</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Одяг start -->
                                <div class="form-group row mb-md-0" id="clothesDetailsEdit">
                                    <div class="col-12 form-group">
                                        <label class="form-label">Сезон</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select form-control form-control-lg" id="selectClothesSeasonEdit" onchange="setSingleHiddenValue(this.id, $(this).siblings('input').prop('id'))">
                                                <option value="spring">Весна</option>
                                                <option value="summer">Літо</option>
                                                <option value="autumn">Осінь</option>
                                                <option value="winter">Зима</option>
                                                <option value="demiseason">Демісезон</option>
                                            </select>
                                            <input type="hidden" id="selectHiddenClothesSeasonEdit" name="season"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label class="form-label">Тип</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select form-control form-control-lg" name="typeOfProduct.id" id="selectClothesTypeEdit">
                                                <option th:each="t :${types}" th:value="${t.getId()}" th:text="${t.getName()}"
                                                        th:if="${t.getCategory().name().equals('CLOTHES')}"></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label class="form-label">Розміри</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select" multiple="multiple" data-placeholder="Виберіть значення..." name="sizes" id="selectClothesSizesEdit">
                                                <option th:each="s : ${sizes}" th:if="${s.getCategory().name().equals('CLOTHES')}" th:value="${s.getId()}" th:text="${s.getSize()}"></option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- Одяг end -->
                                <!-- Взуття start-->
                                <div class="form-group row mb-md-0" id="shoesDetailsEdit" style="display: none;">
                                    <div class="col-12 form-group">
                                        <label class="form-label">Сезон</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select form-control form-control-lg" id="selectShoesSeasonEdit" onchange="setSingleHiddenValue(this.id, $(this).siblings('input').prop('id'))">
                                                <option value="spring">Весна</option>
                                                <option value="summer">Літо</option>
                                                <option value="autumn">Осінь</option>
                                                <option value="winter">Зима</option>
                                                <option value="demiseason">Демісезон</option>
                                            </select>
                                            <input type="hidden" id="selectHiddenShoesSeasonEdit" name="season"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label class="form-label">Тип</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select form-control form-control-lg" name="typeOfProduct.id" id="selectShoesTypesEdit">
                                                <option th:each="t :${types}" th:value="${t.getId()}" th:text="${t.getName()}"
                                                        th:if="${t.getCategory().name().equals('SHOES')}"></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group">
                                        <label class="form-label">Розміри</label>
                                        <div class="form-control-wrap">
                                            <select class="form-select" multiple="multiple" name="sizes" data-placeholder="Виберіть значення..." id="selectShoesSizesEdit">
                                                <option th:each="s : ${sizes}" th:if="${s.getCategory().name().equals('SHOES')}" th:value="${s.getId()}" th:text="${s.getSize()}"></option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- Взуття end -->
                                <div class="form-group">
                                    <button type="submit" class="btn btn-outline-primary">Зберегти</button>
                                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Скасувати</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Edit end -->

            <!-- Change status start -->
            <div class="modal fade" tabindex="-1" role="dialog" id="changeProductStatusModal" aria-modal="true">
                <div class="modal-dialog modal-md" role="document">
                    <div class="modal-content">
                        <a href="#" class="close" data-dismiss="modal"><em class="icon ni ni-cross-sm"></em></a>
                        <div class="modal-body modal-body-md">
                            <h4 class="title">Змінити статус</h4>
                            <br>
                            <form action="/admin/changeStatusOfProduct" method="post">
                                <input type="number" id="selectedForChangingStatusItem" hidden="" name="productId">
                                <div class="form-group">
                                    <div class="preview-block">
                                        <span class="preview-title overline-title">Статус товару</span>
                                        <div class="custom-control custom-switch">
                                            <input type="checkbox" class="custom-control-input" checked id="showItemSwitch" name="switchValue">
                                            <label class="custom-control-label" for="showItemSwitch">Відображати в магазині</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-outline-primary">Змінити</button>
                                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Скасувати</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Change status end -->


            <!-- Delete product start -->
            <div class="modal fade" tabindex="-1" role="dialog" id="deleteProductModal" aria-modal="true">
                <div class="modal-dialog modal-md" role="document">
                    <div class="modal-content">
                        <a href="#" class="close" data-dismiss="modal"><em class="icon ni ni-cross-sm"></em></a>
                        <div class="modal-body modal-body-md">
                            <h4 class="title">Видалення товару</h4>
                            <br>
                            <form action="/admin/deleteProductById" method="post">
                                <input type="number" id="selectedForDeleteItem" hidden="" name="productId">
                                <p style="margin-bottom: 2rem;">Ви впевнені, що хочете видалити товар? Підтвердивши дію, Ви не зможете повернутися до попереднього стану продукту.</p>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-outline-primary">Підтвердити</button>
                                    <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Скасувати</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Delete product end -->

            <!-- content @e -->
            <!-- footer @s -->
            <div th:replace="~{/admin/fragments/fragAdminFooter.html :: adminFooter}"></div>
            <!-- footer @e -->
        </div>
        <!-- wrap @e -->
    </div>
    <!-- main @e -->
</div>
<!-- app-root @e -->
<!-- JavaScript -->
<script th:src="@{/js/bundle.js}"></script>
<script th:src="@{/js/scripts.js}"></script>
<!--<script th:src="@{/js/example-sweetalert.js}"></script>-->
<script>
    $(document).ready(function() {
        let t = $('#positionsTable').DataTable({
            "autoWidth": false,
            "bSort" : false,
            "searching": false,
            "paging": false,
            "info": false,
            'select': false,
        });
        let counter = 1;

        $('#addPosition').on( 'click', function () {
            let rowNode = t.row.add([
                '0',
                '0',
                '0',
                '0',
                '0',
                '0',
                'btn'
            ]).draw(false).node();
            console.log(rowNode);
            $(rowNode).addClass('nk-tb-item');
            counter++;
        } );



        // Automatically add a first row of data
        $('#addPosition').click();
    } );



    $('#mainCategoriesEdit').on('change', function (e) {
        let optionSelected = $("option:selected", this);
        let selectedValue = this.value;

        console.log("OS: "+optionSelected+"\nSV: "+selectedValue);

        if (selectedValue === "CLOTHES"){
            $('#clothesDetailsEdit').show();
            $('#shoesDetailsEdit').hide();
        }else if (selectedValue === "SHOES"){
            $('#clothesDetailsEdit').hide();
            $('#shoesDetailsEdit').show();
        }
    });

    function setSingleHiddenValue(idVal, idHiddenVal) {
        console.log("1. selectId: "+$('#'+idVal).val()+"; hiddenId: "+ $("#"+idHiddenVal).val());
        // $("#"+idHiddenVal).val($('#'+idVal).val().toString().split(',')[0]);
        $("#"+idHiddenVal).val($('#'+idVal).val().toString());
        console.log("2. selectId: "+$('#'+idVal).val()+"; hiddenId: "+ $("#"+idHiddenVal).val());
    }

    function showEditProductModal(btnObj) {
        let trObj = btnObj.closest("tbody tr");
        let trId =  $(trObj).attr('id');

        console.log("row id:" + $(trObj).attr('id'));

        let productName =       $(trObj).find('td:eq(1)').text();
        let article =           $(trObj).find('td:eq(2)').text();
        let price =             $(trObj).find('td:eq(3)').text();
        let category =          $(trObj).find('td:eq(5)').text();
        let description =       $(trObj).find('td:eq(6)').text();
        let season =            $(trObj).find('td:eq(7)').text().split(',')[0];
        let type =              $(trObj).find('td:eq(8)').text();
        let size =              $(trObj).find('td:eq(9)').text();
        let promotionPrice =    $(trObj).find('td:eq(10)').text();
        let promotionProduct =  $(trObj).find('td:eq(11)').text();
        size = size.replace(/[\[\]']+/g, '');
        console.log("Sizes: "+size);

        if (promotionProduct.trim()=="true"){
            $('#promotedProductEdit').attr("checked", true);
        }else if (promotionProduct.trim()=="false") {
            $('#promotedProductEdit').attr("checked", false);
        }

        $('#selectedForEditItem')           .val(trId);
        // $('#editProductImage')              .val(image.toString());
        $('#editProductName')               .val(productName.trim());
        $('#editArticleNumber')             .val(article.trim());
        $('#editProductPrice')              .val(price.trim());
        $('#mainCategoriesEdit')            .val(category.trim()).change();
        $('#editProductDescription')        .val(description.trim());
        $('#selectClothesSeasonEdit')       .val(season.trim()).change();
        $('#selectClothesTypeEdit')         .val(type.trim()).change();
        $('#productPromotionalPriceEdit')   .val(promotionPrice.trim());

        $.each(size.split(","), function(i,e){
            $("#selectClothesSizesEdit option[value='" + e.trim() + "']").prop("selected", true);
            console.log("e: "+e.trim());
        });

        $('#selectClothesSizesEdit').change();

        $('#editProductModal').modal('show');
    }

    function showEditProductStatusModal(btnObj) {
        let trObj = btnObj.closest("tbody tr");
        let trId =  $(trObj).attr('id');

        let status = $(trObj).find('td:eq(4)').text();

        if (status.trim()=="Active"){
            $('#showItemSwitch').attr("checked", true);
        }else if (status.trim()=="Archive") {
            $('#showItemSwitch').attr("checked", false);
        }

        console.log("row id:" + $(trObj).attr('id'));

        $('#selectedForChangingStatusItem') .val(trId);

        $('#changeProductStatusModal').modal('show');
    }

    function showConfirmationDeleteProductModal(btnObj){
        let trObj = btnObj.closest("tbody tr");
        let trId =  $(trObj).attr('id');

        console.log("row id:" + $(trObj).attr('id'));

        $('#selectedForDeleteItem').val(trId);

        $('#deleteProductModal').modal('show');
    }

    function validateimg(ctrl) {
        var fileUpload = ctrl;
        var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png|.gif)$");
        if (regex.test(fileUpload.value.toLowerCase())) {
            if (typeof (fileUpload.files) != "undefined") {
                var reader = new FileReader();
                reader.readAsDataURL(fileUpload.files[0]);
                reader.onload = function (e) {
                    var image = new Image();
                    image.src = e.target.result;
                    image.onload = function () {
                        let height = this.height;
                        let width = this.width;
                        let aspectRatio = width/height;
                        if ((aspectRatio.toFixed(2)>0.60) && (aspectRatio.toFixed(2)<0.70)) {
                            console.log("Asp rat: "+aspectRatio.toFixed(2));
                            return true;
                        }else{
                            console.log("Asp rat: "+aspectRatio.toFixed(2));
                            alert("Некоректне співвідношення сторін фотографії!");
                            $("#productImage").val('');
                            return false;
                        }
                    };
                }
            } else {
                alert("Ваш браузер не підтримує HTML5.");
                $("#productImage").val('');
                return false;
            }
        } else {
            alert("Недопустимий формат файлу.");
            $("#productImage").val('');
            return false;
        }
    }

</script>
<script>
    tinymce.init({
        selector: '.rich-editor',
        plugins: 'advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed powerpaste table advtable',
        toolbar: 'casechange code table',
        toolbar_mode: 'floating',
        tinycomments_mode: 'embedded',
        tinycomments_author: 'Author name'
    });
</script>
</body>

</html>